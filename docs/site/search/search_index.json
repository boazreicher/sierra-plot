{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Sierra Plot # Sierra Plot is a Grafan panel plugin for visualizing datasets containing a very large number of series A Sierra Plot is an extension of the Ridgeline Plot 1 , with a number of additional elements, most notably: An added chart showing the totals across all of the different series Fog for highlighting values above some threshold Grouping And much more Although the use case is quite different, the original motivation is Brendan Gregg's Frequency Trails \u21a9","title":"Sierra Plot"},{"location":"#sierra-plot","text":"Sierra Plot is a Grafan panel plugin for visualizing datasets containing a very large number of series A Sierra Plot is an extension of the Ridgeline Plot 1 , with a number of additional elements, most notably: An added chart showing the totals across all of the different series Fog for highlighting values above some threshold Grouping And much more Although the use case is quite different, the original motivation is Brendan Gregg's Frequency Trails \u21a9","title":"Sierra Plot"},{"location":"configuration_options/","text":"Configuration Options # Fields # Name Description Required Example Amplitude Value field that determines the amplitude (height) of each chart Required Request Count, Error Count Breakdown String field (dimension) on which to split the data into different charts Required Host Name Group String field (dimension) used to group different charts based on common values Optional Cluster Name Fields [Advanced] # Name Description Required Example Weight Value field that determines the weight of each chart. Used for calculating weighted averages Optional Total Request Count Series Breakdown String field (dimension) on which to split each chart to multiple (usually stacked) series Optional Request Type Series Values Specific series values to include in the results Optional GET, POST, PUT Series Values to Exclude Specific series values to exclude from the results Optional GET, POST, PUT Group Values Specific group values to include in the results Optional Cluster1, Cluster2 Group Values to Exclude Specific group values to exclude from the results Optional Cluster1, Cluster2 Series # The following options contorl the behaviour and appearance of the specific charts Name Description Sort Mode Mode for sorting groups and then charts within groups Chart Type Chart type for regular charts. Either linechart or stacked area chart Stepped Area Chart Determines if lines between adjacent data points should be simply connected or appear as steps Aggregation Determines how series values within a chart should be aggregated Max Y Type Determines the how the Y-axis is scaled for each chart: Global : Scaling relative to the maximum value across all charts Total : Scaling relative to the total maximum value Local : Scaling relative to the maximum value in each chart Group : Scaling relative to the maximum value across all charts in each group Skew Percent Positions each chart with an increasing horizontal offset Scale Y Controls the vertical size of each chart Totals # The following options contorl the behaviour and appearance of the totals chart Name Description Chart Type Chart type for the totals chart. Either linechart or stacked area chart Breakdown Breakdown composition for the totals chart: None : A single series. Aggregation of all values Group : Aggregate by groups Chart : Aggregate by chart Series : Aggregate by series (only if series breakdown is used) Stack Mode Stack by actual values, or stack to 100% Total Height Percent Percentage of the plot area for the totals chart to occupy Show Total Show or hide the totals chart Presentation # Name Description Show Range Selector Show or hide the X-axis' time range selector Show Groups Show or hide the group indicators and labels (doesn't affect any other behavior) Left Margin Size Size of the margin between the charts' left-most position and the panel's left border Top Margin Size Size of the margin between the charts' upper-most position and the panel's top border (or the total's chart, if it is visible) Style # Name Description Chart Color Base color for charts Color Mode Regular : Chart color is determined by Chart Color and Color Type Group : The chart color's hue is determined by the group's color and Color Type . Chart Color determines only the saturation and lightness Values : Gradient color based only on the chart's values Values (inverted) : Same as Values , but with inverted colors Color Type Single : Use a single color for every chart (or every chart in a group, if Color Mode is set to Group ) Sequential : Use increasing lightness values for each chart in a sequence (if Color Mode is set to Group , the sequence is reset for each group) Alternating : Alternate lightness values for each chart in a sequence Outline Color Color for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Outline Width Width for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Outline Opacity Opacity for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Glow If enabled, each outline has a glow effect (based on Outline Color ) Glow Spread Size of the glow effect Bevel If enabled, each chart has a bevel effect (only applicable to area charts) Show Background If enabled, displays a background element behind the charts Background Color Color for the background element Labels # Name Description Show Chart Labels Show or hide chart labels Label Color Color for chart and group labels Chart Label Size Size of chart labels Chart Label Shift Shift chart labels horizontally (away from the charts) Group Label Size Size of group labels Markers # Markers are indicators (when hovering over) of the timestamp and value of each series data point Warning Enabling markers in plots that have a very high number of data points might have performance implications Name Description Mode Disable : Markers aren't drawn Hidden : Markers are present (tooltip on mouse over) but are hidden Visible : Markers are visible as dots on each series data point Show Chart Labels Show or hide chart labels Show Chart Labels Show or hide chart labels Fog # Name Description Show Fog Show or hide fog Fog Height Fog height, as a percentage of each chart's height Fog Color Color for fog (supports transparency) Transitions # Name Description Type None : Disable transitions Cycle Groups : Highlight a new group every Period milliseconds Cycle Charts : Highlight a new chart every Period milliseconds Period Cycle duration in milliseconds Gridlines # Name Description Show Show or hide vertical gridlines Width Width of the vertical gridlines Ticks Number of vertical gridlines Color Color for vertical gridlines Position Below Charts : Position gridlines under the charts Aboce Chart : Position gridlines above the charts","title":"Configuration Options"},{"location":"configuration_options/#configuration-options","text":"","title":"Configuration Options"},{"location":"configuration_options/#fields","text":"Name Description Required Example Amplitude Value field that determines the amplitude (height) of each chart Required Request Count, Error Count Breakdown String field (dimension) on which to split the data into different charts Required Host Name Group String field (dimension) used to group different charts based on common values Optional Cluster Name","title":"Fields"},{"location":"configuration_options/#fields-advanced","text":"Name Description Required Example Weight Value field that determines the weight of each chart. Used for calculating weighted averages Optional Total Request Count Series Breakdown String field (dimension) on which to split each chart to multiple (usually stacked) series Optional Request Type Series Values Specific series values to include in the results Optional GET, POST, PUT Series Values to Exclude Specific series values to exclude from the results Optional GET, POST, PUT Group Values Specific group values to include in the results Optional Cluster1, Cluster2 Group Values to Exclude Specific group values to exclude from the results Optional Cluster1, Cluster2","title":"Fields [Advanced]"},{"location":"configuration_options/#series","text":"The following options contorl the behaviour and appearance of the specific charts Name Description Sort Mode Mode for sorting groups and then charts within groups Chart Type Chart type for regular charts. Either linechart or stacked area chart Stepped Area Chart Determines if lines between adjacent data points should be simply connected or appear as steps Aggregation Determines how series values within a chart should be aggregated Max Y Type Determines the how the Y-axis is scaled for each chart: Global : Scaling relative to the maximum value across all charts Total : Scaling relative to the total maximum value Local : Scaling relative to the maximum value in each chart Group : Scaling relative to the maximum value across all charts in each group Skew Percent Positions each chart with an increasing horizontal offset Scale Y Controls the vertical size of each chart","title":"Series"},{"location":"configuration_options/#totals","text":"The following options contorl the behaviour and appearance of the totals chart Name Description Chart Type Chart type for the totals chart. Either linechart or stacked area chart Breakdown Breakdown composition for the totals chart: None : A single series. Aggregation of all values Group : Aggregate by groups Chart : Aggregate by chart Series : Aggregate by series (only if series breakdown is used) Stack Mode Stack by actual values, or stack to 100% Total Height Percent Percentage of the plot area for the totals chart to occupy Show Total Show or hide the totals chart","title":"Totals"},{"location":"configuration_options/#presentation","text":"Name Description Show Range Selector Show or hide the X-axis' time range selector Show Groups Show or hide the group indicators and labels (doesn't affect any other behavior) Left Margin Size Size of the margin between the charts' left-most position and the panel's left border Top Margin Size Size of the margin between the charts' upper-most position and the panel's top border (or the total's chart, if it is visible)","title":"Presentation"},{"location":"configuration_options/#style","text":"Name Description Chart Color Base color for charts Color Mode Regular : Chart color is determined by Chart Color and Color Type Group : The chart color's hue is determined by the group's color and Color Type . Chart Color determines only the saturation and lightness Values : Gradient color based only on the chart's values Values (inverted) : Same as Values , but with inverted colors Color Type Single : Use a single color for every chart (or every chart in a group, if Color Mode is set to Group ) Sequential : Use increasing lightness values for each chart in a sequence (if Color Mode is set to Group , the sequence is reset for each group) Alternating : Alternate lightness values for each chart in a sequence Outline Color Color for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Outline Width Width for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Outline Opacity Opacity for each chart's outline (or for the chart itself, if Chart Type is set to Line ) Glow If enabled, each outline has a glow effect (based on Outline Color ) Glow Spread Size of the glow effect Bevel If enabled, each chart has a bevel effect (only applicable to area charts) Show Background If enabled, displays a background element behind the charts Background Color Color for the background element","title":"Style"},{"location":"configuration_options/#labels","text":"Name Description Show Chart Labels Show or hide chart labels Label Color Color for chart and group labels Chart Label Size Size of chart labels Chart Label Shift Shift chart labels horizontally (away from the charts) Group Label Size Size of group labels","title":"Labels"},{"location":"configuration_options/#markers","text":"Markers are indicators (when hovering over) of the timestamp and value of each series data point Warning Enabling markers in plots that have a very high number of data points might have performance implications Name Description Mode Disable : Markers aren't drawn Hidden : Markers are present (tooltip on mouse over) but are hidden Visible : Markers are visible as dots on each series data point Show Chart Labels Show or hide chart labels Show Chart Labels Show or hide chart labels","title":"Markers"},{"location":"configuration_options/#fog","text":"Name Description Show Fog Show or hide fog Fog Height Fog height, as a percentage of each chart's height Fog Color Color for fog (supports transparency)","title":"Fog"},{"location":"configuration_options/#transitions","text":"Name Description Type None : Disable transitions Cycle Groups : Highlight a new group every Period milliseconds Cycle Charts : Highlight a new chart every Period milliseconds Period Cycle duration in milliseconds","title":"Transitions"},{"location":"configuration_options/#gridlines","text":"Name Description Show Show or hide vertical gridlines Width Width of the vertical gridlines Ticks Number of vertical gridlines Color Color for vertical gridlines Position Below Charts : Position gridlines under the charts Aboce Chart : Position gridlines above the charts","title":"Gridlines"},{"location":"controls/","text":"Controls # Some configuration options can be controlled without editing the panel, via controls in the panel itself: ID Action Comments A Shows/hides the on-panel controls B Shows/hides fog C Increase/decrease fog height D Shows/hides time range selector E Shows/hides vertical gridlines F Toggle transitions mode G Toggle max Y type H No charts breakdown If the data contains multiple series, they are aggregated according to the Aggregation setting I Charts breakdown by series Only applicable if the data contains multiple series J No totals breakdown The data is aggregated across all series/charts/groups according to the Aggregation setting K Totals breakdown by group The data is aggregated across all series/charts per group, according to the Aggregation setting L Totals breakdown by chart The data is aggregated across all series per chart, according to the Aggregation setting M Totals breakdown by series Only applicable if the data contains multiple series, and charts have per-series breakdown","title":"Controls"},{"location":"controls/#controls","text":"Some configuration options can be controlled without editing the panel, via controls in the panel itself: ID Action Comments A Shows/hides the on-panel controls B Shows/hides fog C Increase/decrease fog height D Shows/hides time range selector E Shows/hides vertical gridlines F Toggle transitions mode G Toggle max Y type H No charts breakdown If the data contains multiple series, they are aggregated according to the Aggregation setting I Charts breakdown by series Only applicable if the data contains multiple series J No totals breakdown The data is aggregated across all series/charts/groups according to the Aggregation setting K Totals breakdown by group The data is aggregated across all series/charts per group, according to the Aggregation setting L Totals breakdown by chart The data is aggregated across all series per chart, according to the Aggregation setting M Totals breakdown by series Only applicable if the data contains multiple series, and charts have per-series breakdown","title":"Controls"},{"location":"data/","text":"Data # Requirements # The Sierra Plot panel expects time series data frames, meaning each series must contain at least on field with time type (if multiple such fields exist, the first one will be used) The data must also contain at least one field with type number to be used as the Amplitude At least one field of type string is also required, to be used ad the Chart Breakdown For example, let's assume that we want to plot the number of requests hitting a number of different servers Each server is located in some region Our request count metric is calculated separately for type=OK and type=ERROR For the above example, our data will contain a time field, a number field that represents the number of requests, and a string field representing the server name The following (optional) fields can also be used: Use Type Description Example Group Breakdown string Group charts with the same group value region Series Breakdown string Split the charts' data according to the series values type Weight number Used for weighted average calculations total requests Notes # Sierra Plot expects that each data frame has the same fields Sierra Plot expects that each data frame be of the same length Sierra Plot doesn't currently support null values","title":"Data"},{"location":"data/#data","text":"","title":"Data"},{"location":"data/#requirements","text":"The Sierra Plot panel expects time series data frames, meaning each series must contain at least on field with time type (if multiple such fields exist, the first one will be used) The data must also contain at least one field with type number to be used as the Amplitude At least one field of type string is also required, to be used ad the Chart Breakdown For example, let's assume that we want to plot the number of requests hitting a number of different servers Each server is located in some region Our request count metric is calculated separately for type=OK and type=ERROR For the above example, our data will contain a time field, a number field that represents the number of requests, and a string field representing the server name The following (optional) fields can also be used: Use Type Description Example Group Breakdown string Group charts with the same group value region Series Breakdown string Split the charts' data according to the series values type Weight number Used for weighted average calculations total requests","title":"Requirements"},{"location":"data/#notes","text":"Sierra Plot expects that each data frame has the same fields Sierra Plot expects that each data frame be of the same length Sierra Plot doesn't currently support null values","title":"Notes"},{"location":"examples/","text":"Examples # I. Requests to Servers # The following example showcases how a Sierra Plot can be used to visualize and analyze a scenario of requests hitting: 50 different servers in 5 different regions over 48 hours in 1-minute bins split by result type ( OK or ERROR ) Before diving in, we can make the plot a bit clearer by changing the plot's Max Y Type from Global to Group using the on-panel controls Hint Using Max Y Type => Group makes sense here, since comparing individual server metrics across different regions isn't very relevant. The overall comparison across different regions is captured in the Totals chart I.I Overview # I.I.I Overall Trend # The Totals chart is a simple stacked area chart that clearly shows the overall trend, as well as the per-region breakdown. However, it doesn't do a very good job of showing the indiviual trends for each region. By changing the Totals Chart Type to Line and playing aroung with the Total Height Percent value, we get: A number of observations become apparent now: The trend shows a (baseline) 24 hour cycle in every region A certain time shift between the 24 hour cycles for each region (except us-east-1 and us-east-2 ) A huge spike in us-east-1 near the middle of the chart An unusual increase in request volume in us-east-1 near the end of the chart An unusual increase in request volume in us-east-2 near the end of the chart. Around the same time as in us-east-1 , but much steeper In eu-central-1 there were two servers which didn't get any traffic at all during most of the 48 hour period I.I.II Error Trend # We can see the request count by type ( OK or ERROR ) by using the Series Breakdown and Totals Breakdown features in the plot's controls : Note Using Stacked100 for the totals chart, since we usually care more about the relative error rate, and not the absoulte number of errors We immediately see that the overall error rate is pretty much constant (at 5%) except for two increases, one starting at around 10:00 AM Jan 01, and the second a few hours later It's also straightforward to attribute the first (bigger) increase to the servers in ap-southeast-1, and the second (smaller) increase to a single server in us-east-2 Before drilling down into the specific issues, let's take one more step just to make sure that we didn't miss anything in our high-level view To get a clear picture that specifically targets error rates (as opposed to the volume of requests and their breakdowns) we'll make the following adjustments to the plot's configuration: Change the Series Chart Type and Totals Chart Type from Stacked Area Chart to Line Chart Set the Total field as the plot's Weight Field Set the field value ERROR as the only Series Value Change the value of Aggregation from Sum to Average Set the Color Mode to Values (Inverted) Note Instead of the number of requests of each type, the plot now represents the relative error rate Error / Total for each server. The Totals chart represents the weighted error rate across its selected breakdown We can now feel confident that we didn't miss anything before (for example, a high error rate during a time where the number of requests is very small, which might not be visible in a stacked area chart) I.II Specific Drilldowns # Now that we have a high-level picture of the systems behaviour over the 48 hour period, we'll drilldown into the specific issues that were spotted and see what kinds of information the plot might surface up I.II.I Error Spike in us-east-2 # In I.I.II we saw an error spike in us-east-2 at around 12:00 PM on Jan 01 By drilling down on the us-east-2 group and focusing on the specific time around the issue using the date range control we can get a clearer picture of the behavior in us-east-2 at the time of the issue: Note In this example, Gridlines were enabled. They help us connect events in the plot to specific points in time (which might be difficult due to the plot's skew property) We'll drilldown on us-east-2 again so we can focus on it completely: A number of observations become apparent now: The issue only happened in one server ( ue2-6 ) The effect on the region's overall error rate was an increase from around 5% to around 10% The number of requests for all other servers was pretty much constant at the time of the issue For the affected server ( ue2-6 ), the number of non-error requests was pretty much constant around the time of the issue The above observations might lead us to the following conclusions: All servers were functioning as expected The errors in ue2-6 are due to a specific batch of requests that speficially resulted in errors The abnormal requests to ue2-6 did not affect its serving of normal requests I.II.II Error Spike in ap-southeast-1 # In I.I.II we saw an error spike in ap-southeast-1 at around 10:00 AM on Jan 01 By drilling down on the ap-southeast-1 group we can get a clearer picture of the behaviour of the servers in that region: A number of observations become apparent now: All servers in that region were affected in roughly the same way At the peak of the issue, 100% of requests resulted in errors The trend in overall number of requests to the servers in ap-southeast-1 was not affected by the issue The above observations might lead us to the following conclusions: The issue (errors) was due to something internal (not due to some change in the requests) Since the issue affected all of the servers in the region, and at the same time, there's a good chance that the issue is due to some shared infrastructure component in the region I.II.III Traffic Routing # If we look at us-west-1, we can spot something odd happening at around 06:00 AM Jan 01: Let's drilldown further: And now let's focus on the specific time range: A number of observations become apparent now: The number of requests to 3 servers ( uw1-0 , uw1-1 & uw1-2 ) dropped between 04:00 AM and 07:00 AM The number of requests to 3 servers ( uw1-3 , uw1-4 & uw1-5 ) increased at the same time The trend in total number of requests to the region did not change during that time period While the traffic to uw1-0 , uw1-1 & uw1-2 decreased, it did not go to zero There was no change in the traffic to usw1-6 The above observations might lead us to the following conclusions: Some traffic routing/balancing mechanism shifted some of the traffic from [ uw1-0 , uw1-1 & uw1-2 ] to [ uw1-3 , uw1-4 & uw1-5 ] It doesn't seem like there was some clear issue in the first three servers, since they were still getting traffic and there wasn't an increase in errors I.II.IV Auto Scaling # We noticed earlier that in eu-central-1 , two servers didn't get any traffic at all during most of the 48 hour period Let's focus on that region: A number of observations become apparent now: Two server ( ec1-0 & ec1-1 ) didn't get any requests at all, until Jan 01 at 10:00 PM At about the same time, two other servers ( ec1-2 & ec1-3 ) started seeing an increase in the number of requests At around 01:00 AM Jan 02, the number of requests to ec1-2 & ec1-3 seems to have plateaued At about the same time, the number of requests to ec1-0 & ec1-1 seems to have increased sharply After the load on ec1-2 & ec1-3 subsided, traffic was shifted away from ec1-0 & ec1-1 until they were pulled out of rotation completely The above observations might lead us to the following conclusions: When the load on ec1-2 & ec1-3 increased (and passed some threshold), some autoscaling mechanism was triggered The autoscaling mechanism added ec1-0 & ec1-1 into rotation and they started getting traffic At some point, ec1-2 & ec1-3 reached some capacity threshold, and the LB mechanism maintained that threshold Since ec1-2 & ec1-3 were saturated, the LB mechanism started offloading more traffic to ec1-0 & ec1-1 The asymmetry between the ramp up (fast) and ramp down (slow) of traffic to ec1-0 & ec1-1 might indicate some hysteresis element at play Let's see if there was any noticeable effect on the amount of errors during that time: A number of observations become apparent now: During the sharp increase in the number of requests to ec1-2 & ec1-3 , the error rate in those two servers slightly increased (also noticeable in the total graph for the region) Once ec1-0 & ec1-1 were added to the rotation the error rates subsided The above observations might lead us to the following conclusions: Overall, the LB mechanism is functioning properly Ideally, the additional servers could be added sooner and prevent the temporary increase in errors There's some optimization opportunities to the LB. Specfically, it looks like the scale down could be much more aggresive I.II.V Region Spillover # Let's focus on the regions us-east-1 and us-east-2 by selecting them as the Group Values in Fields [Advanced] : By looking at the Totals chart we can observe the following: At around 20:00 Jan 02, us-east-1 saw a gradual increase in request volume About an hour later, us-east-2 saw a sharp increase in request volume By looking at the series charts we can observe the following: At around 21:00 Jan 02, the request volume to us-east-1 started plateauing The above observations might lead us to the following conclusions: The servers in us-east-1 reached some capacity threshold at 21:00 At that point, traffic started to spill over to us-east-2 It might be interesting to change the Totals chart's stack mode to Stacked100 , to see the relative traffic distribution between the two us-east regions: This shows us that the traffic distribution between the two us-east regions is roughly equal. One of the regions (us-east-1) started getting a bigger relative share of the traffic, but it was re-balanced after an hour or so II. Mortality Rates # The following example shows the mortality rates in France between 1816 and 2016, by gender It is based on the amazing visualization created by Kieran Healy : Note The chart labels have been disabled for clarity. Each chart represents a single age cohort, starting from 0-1 at the bottom to 95 at the top The plot allows us to immediatly observe events such as world wars and the 1918 influenza pandemic, as well as the considerable decline in infant mortality By switching the max Y type to Local we get a different representation, which makes it easier to see trends for each individual age cohort (at the cost of losing the ability to compare values across different age cohorts): We can also decide to group certain ages, and represent that in the plot: By switching the max Y type to Group we can see trends for each age cohort relative to its defined group: Some more styling options: III. Covid19 Cases # The following example shows the number of daily reported Covid-19 cases in the United States, by state: By switching the max Y type to Local we get a different representation which shows us the trend in each specific state (each chart's Y-axis has its own scale): By enabling Fog we can highlight the peaks in the plot. Since we're using Local for max Y type , the Fog shows us the alignment of the peaks across all charts (basically, the peaks of the Covid-19 infection waves): Some more styling options: III. Lots of Charts # The following examples showcases how Sierra Plots are useful for visualizing high-cardinality datasets III.I 200 Servers # The following example shows request rates across a 24 hour period (with 5 minute bins) for 200 servers across 5 different regions It shows that even with a very large number of charts, overall trends and abnormal behaviours are still easy to spot: III.II 2000 Servers # Let's get a little crazy... The following example shows request rates across a 12 hour period (with 5 minute bins) for 2000 servers across 5 different regions Even now, trends and outliers are still readily apparent","title":"Examples"},{"location":"examples/#examples","text":"","title":"Examples"},{"location":"examples/#i-requests-to-servers","text":"The following example showcases how a Sierra Plot can be used to visualize and analyze a scenario of requests hitting: 50 different servers in 5 different regions over 48 hours in 1-minute bins split by result type ( OK or ERROR ) Before diving in, we can make the plot a bit clearer by changing the plot's Max Y Type from Global to Group using the on-panel controls Hint Using Max Y Type => Group makes sense here, since comparing individual server metrics across different regions isn't very relevant. The overall comparison across different regions is captured in the Totals chart","title":"I.  Requests to Servers"},{"location":"examples/#ii-overview","text":"","title":"I.I  Overview"},{"location":"examples/#iii-overall-trend","text":"The Totals chart is a simple stacked area chart that clearly shows the overall trend, as well as the per-region breakdown. However, it doesn't do a very good job of showing the indiviual trends for each region. By changing the Totals Chart Type to Line and playing aroung with the Total Height Percent value, we get: A number of observations become apparent now: The trend shows a (baseline) 24 hour cycle in every region A certain time shift between the 24 hour cycles for each region (except us-east-1 and us-east-2 ) A huge spike in us-east-1 near the middle of the chart An unusual increase in request volume in us-east-1 near the end of the chart An unusual increase in request volume in us-east-2 near the end of the chart. Around the same time as in us-east-1 , but much steeper In eu-central-1 there were two servers which didn't get any traffic at all during most of the 48 hour period","title":"I.I.I  Overall Trend"},{"location":"examples/#iiii-error-trend","text":"We can see the request count by type ( OK or ERROR ) by using the Series Breakdown and Totals Breakdown features in the plot's controls : Note Using Stacked100 for the totals chart, since we usually care more about the relative error rate, and not the absoulte number of errors We immediately see that the overall error rate is pretty much constant (at 5%) except for two increases, one starting at around 10:00 AM Jan 01, and the second a few hours later It's also straightforward to attribute the first (bigger) increase to the servers in ap-southeast-1, and the second (smaller) increase to a single server in us-east-2 Before drilling down into the specific issues, let's take one more step just to make sure that we didn't miss anything in our high-level view To get a clear picture that specifically targets error rates (as opposed to the volume of requests and their breakdowns) we'll make the following adjustments to the plot's configuration: Change the Series Chart Type and Totals Chart Type from Stacked Area Chart to Line Chart Set the Total field as the plot's Weight Field Set the field value ERROR as the only Series Value Change the value of Aggregation from Sum to Average Set the Color Mode to Values (Inverted) Note Instead of the number of requests of each type, the plot now represents the relative error rate Error / Total for each server. The Totals chart represents the weighted error rate across its selected breakdown We can now feel confident that we didn't miss anything before (for example, a high error rate during a time where the number of requests is very small, which might not be visible in a stacked area chart)","title":"I.I.II  Error Trend"},{"location":"examples/#iii-specific-drilldowns","text":"Now that we have a high-level picture of the systems behaviour over the 48 hour period, we'll drilldown into the specific issues that were spotted and see what kinds of information the plot might surface up","title":"I.II  Specific Drilldowns"},{"location":"examples/#iiii-error-spike-in-us-east-2","text":"In I.I.II we saw an error spike in us-east-2 at around 12:00 PM on Jan 01 By drilling down on the us-east-2 group and focusing on the specific time around the issue using the date range control we can get a clearer picture of the behavior in us-east-2 at the time of the issue: Note In this example, Gridlines were enabled. They help us connect events in the plot to specific points in time (which might be difficult due to the plot's skew property) We'll drilldown on us-east-2 again so we can focus on it completely: A number of observations become apparent now: The issue only happened in one server ( ue2-6 ) The effect on the region's overall error rate was an increase from around 5% to around 10% The number of requests for all other servers was pretty much constant at the time of the issue For the affected server ( ue2-6 ), the number of non-error requests was pretty much constant around the time of the issue The above observations might lead us to the following conclusions: All servers were functioning as expected The errors in ue2-6 are due to a specific batch of requests that speficially resulted in errors The abnormal requests to ue2-6 did not affect its serving of normal requests","title":"I.II.I  Error Spike in us-east-2"},{"location":"examples/#iiiii-error-spike-in-ap-southeast-1","text":"In I.I.II we saw an error spike in ap-southeast-1 at around 10:00 AM on Jan 01 By drilling down on the ap-southeast-1 group we can get a clearer picture of the behaviour of the servers in that region: A number of observations become apparent now: All servers in that region were affected in roughly the same way At the peak of the issue, 100% of requests resulted in errors The trend in overall number of requests to the servers in ap-southeast-1 was not affected by the issue The above observations might lead us to the following conclusions: The issue (errors) was due to something internal (not due to some change in the requests) Since the issue affected all of the servers in the region, and at the same time, there's a good chance that the issue is due to some shared infrastructure component in the region","title":"I.II.II  Error Spike in ap-southeast-1"},{"location":"examples/#iiiiii-traffic-routing","text":"If we look at us-west-1, we can spot something odd happening at around 06:00 AM Jan 01: Let's drilldown further: And now let's focus on the specific time range: A number of observations become apparent now: The number of requests to 3 servers ( uw1-0 , uw1-1 & uw1-2 ) dropped between 04:00 AM and 07:00 AM The number of requests to 3 servers ( uw1-3 , uw1-4 & uw1-5 ) increased at the same time The trend in total number of requests to the region did not change during that time period While the traffic to uw1-0 , uw1-1 & uw1-2 decreased, it did not go to zero There was no change in the traffic to usw1-6 The above observations might lead us to the following conclusions: Some traffic routing/balancing mechanism shifted some of the traffic from [ uw1-0 , uw1-1 & uw1-2 ] to [ uw1-3 , uw1-4 & uw1-5 ] It doesn't seem like there was some clear issue in the first three servers, since they were still getting traffic and there wasn't an increase in errors","title":"I.II.III  Traffic Routing"},{"location":"examples/#iiiiv-auto-scaling","text":"We noticed earlier that in eu-central-1 , two servers didn't get any traffic at all during most of the 48 hour period Let's focus on that region: A number of observations become apparent now: Two server ( ec1-0 & ec1-1 ) didn't get any requests at all, until Jan 01 at 10:00 PM At about the same time, two other servers ( ec1-2 & ec1-3 ) started seeing an increase in the number of requests At around 01:00 AM Jan 02, the number of requests to ec1-2 & ec1-3 seems to have plateaued At about the same time, the number of requests to ec1-0 & ec1-1 seems to have increased sharply After the load on ec1-2 & ec1-3 subsided, traffic was shifted away from ec1-0 & ec1-1 until they were pulled out of rotation completely The above observations might lead us to the following conclusions: When the load on ec1-2 & ec1-3 increased (and passed some threshold), some autoscaling mechanism was triggered The autoscaling mechanism added ec1-0 & ec1-1 into rotation and they started getting traffic At some point, ec1-2 & ec1-3 reached some capacity threshold, and the LB mechanism maintained that threshold Since ec1-2 & ec1-3 were saturated, the LB mechanism started offloading more traffic to ec1-0 & ec1-1 The asymmetry between the ramp up (fast) and ramp down (slow) of traffic to ec1-0 & ec1-1 might indicate some hysteresis element at play Let's see if there was any noticeable effect on the amount of errors during that time: A number of observations become apparent now: During the sharp increase in the number of requests to ec1-2 & ec1-3 , the error rate in those two servers slightly increased (also noticeable in the total graph for the region) Once ec1-0 & ec1-1 were added to the rotation the error rates subsided The above observations might lead us to the following conclusions: Overall, the LB mechanism is functioning properly Ideally, the additional servers could be added sooner and prevent the temporary increase in errors There's some optimization opportunities to the LB. Specfically, it looks like the scale down could be much more aggresive","title":"I.II.IV  Auto Scaling"},{"location":"examples/#iiiv-region-spillover","text":"Let's focus on the regions us-east-1 and us-east-2 by selecting them as the Group Values in Fields [Advanced] : By looking at the Totals chart we can observe the following: At around 20:00 Jan 02, us-east-1 saw a gradual increase in request volume About an hour later, us-east-2 saw a sharp increase in request volume By looking at the series charts we can observe the following: At around 21:00 Jan 02, the request volume to us-east-1 started plateauing The above observations might lead us to the following conclusions: The servers in us-east-1 reached some capacity threshold at 21:00 At that point, traffic started to spill over to us-east-2 It might be interesting to change the Totals chart's stack mode to Stacked100 , to see the relative traffic distribution between the two us-east regions: This shows us that the traffic distribution between the two us-east regions is roughly equal. One of the regions (us-east-1) started getting a bigger relative share of the traffic, but it was re-balanced after an hour or so","title":"I.II.V  Region Spillover"},{"location":"examples/#ii-mortality-rates","text":"The following example shows the mortality rates in France between 1816 and 2016, by gender It is based on the amazing visualization created by Kieran Healy : Note The chart labels have been disabled for clarity. Each chart represents a single age cohort, starting from 0-1 at the bottom to 95 at the top The plot allows us to immediatly observe events such as world wars and the 1918 influenza pandemic, as well as the considerable decline in infant mortality By switching the max Y type to Local we get a different representation, which makes it easier to see trends for each individual age cohort (at the cost of losing the ability to compare values across different age cohorts): We can also decide to group certain ages, and represent that in the plot: By switching the max Y type to Group we can see trends for each age cohort relative to its defined group: Some more styling options:","title":"II. Mortality Rates"},{"location":"examples/#iii-covid19-cases","text":"The following example shows the number of daily reported Covid-19 cases in the United States, by state: By switching the max Y type to Local we get a different representation which shows us the trend in each specific state (each chart's Y-axis has its own scale): By enabling Fog we can highlight the peaks in the plot. Since we're using Local for max Y type , the Fog shows us the alignment of the peaks across all charts (basically, the peaks of the Covid-19 infection waves): Some more styling options:","title":"III. Covid19 Cases"},{"location":"examples/#iii-lots-of-charts","text":"The following examples showcases how Sierra Plots are useful for visualizing high-cardinality datasets","title":"III. Lots of Charts"},{"location":"examples/#iiii-200-servers","text":"The following example shows request rates across a 24 hour period (with 5 minute bins) for 200 servers across 5 different regions It shows that even with a very large number of charts, overall trends and abnormal behaviours are still easy to spot:","title":"III.I 200 Servers"},{"location":"examples/#iiiii-2000-servers","text":"Let's get a little crazy... The following example shows request rates across a 12 hour period (with 5 minute bins) for 2000 servers across 5 different regions Even now, trends and outliers are still readily apparent","title":"III.II 2000 Servers"},{"location":"features/","text":"Features # Drilldowns # Group Drilldown # It is possible to drilldown into a specific group by clicking the (colored) group segment on the left part of the plot The first drilldown focuses on the group by changing the plot's appearance in the following ways: Fading out all of the other groups Changing the color palette for the charts in the selected group (to make them more distinct) Having the totals chart represent only the data from the selected group Drilling down into a group that's already in focus, changes it to exlucsive mode, where in addition to the effects of focusing the group, all of the other groups are altogether removed from the plot Clicking on a group that is already in exclusive mode will reset the selection (no group is selected) Chart Drilldown # Clicking on a chart brings it into focus by changing the plot's appearance in the following ways: Fading out all of the charts Setting the X-axis right below the selected chart Clicking on a chart that is already in focus will reset the selection (no chart is selected) Totals Drilldown # Clicking on the totals chart switches its stack mode from regular to stacked to 100% and back Date Range Control # The date range control allows for zooming in to specific areas of the plot It is especially useful for data sets that have a high number of time points. The date range control can be enabled via the plot controls . It will appear as a simple column chart (representing the plot's total) at the bottom of the plot A specific time range can be selected by clicking on the date range control chart and dragging across a range: The selection can be modified and moved by interacting with it. A single click on the date range control chart (outside of the selection) will reset the selected range: Fog # Fog is used to highlight values above a certain threshold. Parts of the chart below the fog's height will be hidden under the fog By using fog, it is much easier to spot outlier values (which will be above the fog) Transitions # Tranistions are used to create sort of dynamic slideshows from Sierra plots. The most common use case would be a dashboard that is presented over a long period of time and with no user interaction (such as on a TV monitor), where there's value in periodically cycling between which plot elements are in focus. There are two different tranisition modes: 1. Group : The plot periodically highlights a different group: 2. Chart : The plot periodically highlights a different chart: The cycle period is configurable","title":"Features"},{"location":"features/#features","text":"","title":"Features"},{"location":"features/#drilldowns","text":"","title":"Drilldowns"},{"location":"features/#group-drilldown","text":"It is possible to drilldown into a specific group by clicking the (colored) group segment on the left part of the plot The first drilldown focuses on the group by changing the plot's appearance in the following ways: Fading out all of the other groups Changing the color palette for the charts in the selected group (to make them more distinct) Having the totals chart represent only the data from the selected group Drilling down into a group that's already in focus, changes it to exlucsive mode, where in addition to the effects of focusing the group, all of the other groups are altogether removed from the plot Clicking on a group that is already in exclusive mode will reset the selection (no group is selected)","title":"Group Drilldown"},{"location":"features/#chart-drilldown","text":"Clicking on a chart brings it into focus by changing the plot's appearance in the following ways: Fading out all of the charts Setting the X-axis right below the selected chart Clicking on a chart that is already in focus will reset the selection (no chart is selected)","title":"Chart Drilldown"},{"location":"features/#totals-drilldown","text":"Clicking on the totals chart switches its stack mode from regular to stacked to 100% and back","title":"Totals Drilldown"},{"location":"features/#date-range-control","text":"The date range control allows for zooming in to specific areas of the plot It is especially useful for data sets that have a high number of time points. The date range control can be enabled via the plot controls . It will appear as a simple column chart (representing the plot's total) at the bottom of the plot A specific time range can be selected by clicking on the date range control chart and dragging across a range: The selection can be modified and moved by interacting with it. A single click on the date range control chart (outside of the selection) will reset the selected range:","title":"Date Range Control"},{"location":"features/#fog","text":"Fog is used to highlight values above a certain threshold. Parts of the chart below the fog's height will be hidden under the fog By using fog, it is much easier to spot outlier values (which will be above the fog)","title":"Fog"},{"location":"features/#transitions","text":"Tranistions are used to create sort of dynamic slideshows from Sierra plots. The most common use case would be a dashboard that is presented over a long period of time and with no user interaction (such as on a TV monitor), where there's value in periodically cycling between which plot elements are in focus. There are two different tranisition modes: 1. Group : The plot periodically highlights a different group: 2. Chart : The plot periodically highlights a different chart: The cycle period is configurable","title":"Transitions"}]}